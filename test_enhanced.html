<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Test Enhanced Winamp-Style Spectrum</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Test Enhanced Winamp Spectrum</h1>
    <div class="toggles">
      <!-- Advanced Features Controls -->
      <div class="advanced-controls">
        <label><input id="bpm-toggle" type="checkbox" checked> BPM Detection</label>
        <label><input id="spectrum-toggle" type="checkbox"> Spectrum Analysis</label>
        <label><input id="music-theory-toggle" type="checkbox" checked> Music Theory</label>
      </div>
    </div>
  </header>
  
  <!-- Advanced Features Panels -->
  <section class="advanced-panels">
    <!-- BPM Detection Panel -->
    <div id="bpm-panel" class="bpm-panel">
      <h3>BPM Detection</h3>
      <div class="bpm-display-container">
        <div class="bpm-main">
          <span class="bpm-label">BPM:</span>
          <span id="bpm-display" class="bpm-value">--</span>
        </div>
        <div class="bpm-details">
          <div class="bpm-confidence">
            <span>Confidence: </span>
            <span id="bpm-confidence">--%</span>
          </div>
          <div class="tempo-description">
            <span>Tempo: </span>
            <span id="tempo-description">Unknown</span>
          </div>
        </div>
      </div>
      <div class="bpm-controls">
        <label>Sensitivity:
          <input type="range" id="bpm-sensitivity" min="0.1" max="1.0" step="0.1" value="0.3">
        </label>
      </div>
    </div>

    <!-- Spectrum Analysis Panel -->
    <div id="spectrum-panel" class="spectrum-panel">
      <h3>Spectrum Analysis</h3>
      
      <div class="spectrum-controls">
        <label>Detail Level:
          <select id="spectrum-detail">
            <option value="normal" selected>Normal (30 FPS)</option>
            <option value="high">High (60 FPS)</option>
          </select>
        </label>
      </div>

      <div class="spectrum-info">
        <div class="dominant-frequency">
          <span>Dominant: </span>
          <span id="dominant-frequency">-- Hz</span>
          <span id="musical-note" class="musical-note"></span>
        </div>
      </div>

      <div class="frequency-bands" id="frequency-bands"></div>
      
      <div class="frequency-peaks-container">
        <h4>Frequency Peaks</h4>
        <div id="frequency-peaks" class="frequency-peaks"></div>
      </div>
      
      <div class="spectral-features-container">
        <h4>Spectral Features</h4>
        <div id="spectral-features" class="spectral-features"></div>
      </div>
    </div>

    <!-- Music Theory Analysis Panel -->
    <div id="music-theory-panel" class="music-theory-panel">
      <h3>Music Theory Analysis</h3>
      
      <div class="music-theory-controls">
        <label>Key Confidence:
          <input type="range" id="key-confidence-threshold" min="0.3" max="0.9" step="0.1" value="0.6">
          <span id="key-confidence-value">60%</span>
        </label>
        <label>Chord Confidence:
          <input type="range" id="chord-confidence-threshold" min="0.3" max="0.8" step="0.1" value="0.5">
          <span id="chord-confidence-value">50%</span>
        </label>
      </div>

      <div class="key-analysis">
        <h4>Current Key</h4>
        <div class="key-info">
          <div class="key-display-container">
            <span id="current-key" class="key-display major">C major</span>
            <span id="key-confidence" class="confidence-indicator">--%</span>
          </div>
          <div class="key-signature">
            <span>Key Signature: </span>
            <span id="key-signature">C major / A minor</span>
          </div>
        </div>
      </div>

      <div class="chord-analysis">
        <h4>Current Chord</h4>
        <div class="chord-info">
          <div class="chord-display-container">
            <span id="current-chord" class="chord-display major">C</span>
            <span id="roman-numeral" class="roman-numeral major">I</span>
            <span id="chord-confidence" class="confidence-indicator">--%</span>
          </div>
        </div>
      </div>

      <div class="progression-analysis">
        <h4>Chord Progression</h4>
        <div id="chord-progression" class="chord-progression"></div>
      </div>
    </div>
  </section>
  
  <script>
    // Simple test to verify panel visibility
    document.addEventListener('DOMContentLoaded', function() {
      // Set initial panel visibility based on checkboxes
      const bpmToggle = document.getElementById('bpm-toggle');
      const bpmPanel = document.getElementById('bpm-panel');
      const spectrumToggle = document.getElementById('spectrum-toggle');
      const spectrumPanel = document.getElementById('spectrum-panel');
      const musicTheoryToggle = document.getElementById('music-theory-toggle');
      const musicTheoryPanel = document.getElementById('music-theory-panel');
      
      if (bpmToggle && bpmPanel) {
        bpmPanel.style.display = bpmToggle.checked ? 'block' : 'none';
        bpmToggle.addEventListener('change', function(e) {
          bpmPanel.style.display = e.target.checked ? 'block' : 'none';
        });
      }
      
      if (spectrumToggle && spectrumPanel) {
        spectrumPanel.style.display = spectrumToggle.checked ? 'block' : 'none';
        spectrumToggle.addEventListener('change', function(e) {
          spectrumPanel.style.display = e.target.checked ? 'block' : 'none';
        });
      }
      
      if (musicTheoryToggle && musicTheoryPanel) {
        musicTheoryPanel.style.display = musicTheoryToggle.checked ? 'block' : 'none';
        musicTheoryToggle.addEventListener('change', function(e) {
          musicTheoryPanel.style.display = e.target.checked ? 'block' : 'none';
        });
      }
    });
  </script>
</body>
</html>